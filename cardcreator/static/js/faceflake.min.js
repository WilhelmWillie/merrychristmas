function createFlakes(e){if(0!=e.length){for(var t=0;t<e.length;t++){face=e[t];var o=$("<div class='snow-flake'><img src='"+$("#photo").attr("src")+"' /></div>");o.css("left",Math.random()*($(document).width()-FLAKE_SIZE));var a=$("#photo").width()/face.scaleX,i=a*FLAKE_SIZE/face.width;originalHeight=$("#photo").height()/face.scaleY,newHeight=originalHeight*FLAKE_SIZE/face.height,newX=face.x*(i/a),newY=face.y*(newHeight/originalHeight),o.children("img").css({width:i+"px",height:newHeight+"px",left:-1*newX+"px",top:-1*newY+"px"}),$("body").append(o),flake_speeds.push(Math.random()*(MAX_FLAKE_SPEED-MIN_FLAKE_SPEED)+MIN_FLAKE_SPEED)}setInterval("moveFlakes()",30)}}function moveFlakes(){$(".snow-flake").each(function(e){$(this).css("top",$(this).position().top+flake_speeds[e]),$(this).position().top>=$(window).height()+FLAKE_SIZE&&($(this).css("top",-FLAKE_SIZE),$(this).css("left",Math.random()*($(document).width()-FLAKE_SIZE)))})}var FLAKE_SIZE=45,MAX_FLAKE_SPEED=5,MIN_FLAKE_SPEED=3,flake_speeds=[];$(document).ready(function(){var e=new Image;e.src=$("#photo").attr("src"),e.onload=function(){$("#photo").faceDetection({complete:function(e){createFlakes(e)}})}});