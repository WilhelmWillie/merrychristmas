{% extends "base.html" %}

{% block content %}

<div class="container">
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <div class="card">
        <div class="card-img">
          <img src="/static/uploads/{{card.img}}" class="img-responsive" id="photo"/>
        </div>

        <div class="card-ribbon">
          <p>Merry Christmas!</p>
        </div>

        <div class="card-content">
          <p class="lead">
            <span class="to"><strong>Dear {{card.to_recipient}},</strong></span>
            {{card.message}}
            <span class="from"><strong>From, {{card.from_sender}}</strong></span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{%block scripts %}
<script src="/static/js/jquery.facedetection.min.js"></script>
<script src="/static/js/snow.js"></script>

<script>
/*function makeItRain(faces) {
  for(var i=0;i<faces.length;i++) {
    f = faces[i];

    var flake = $("<div class='snow-flake'><img src='/static/uploads/{{card.img}}' /></div>");
    flake.css("left", Math.random() * $(document).width());
    flake.children("img").width(45 * $(this).width() / f.width);
    flake.children("img").height(45 * $(this).height() / f.height);
    flake.children("img").css("left", f.x / $("#photo").width() * $(this).width());
    flake.children("img").css("top", f.y / $("#photo").height() * $(this).height());
    $('body').append(flake);
  }

  setInterval("snowFace()", 10);
}

function snowFace() {
  $(".snow-flake").each(function() {
    $(this).css("top", $(this).position().top + 5);

    if ($(this).position().top >= $(window).height() + 45) {
      $(this).css("top", -60);
      $(this).css("left", Math.random() * $(document).width());
    }
  })
}

$(document).ready(function() {
  $("#photo").faceDetection({
    complete: function (f) {
      makeItRain(f);
    }
  });
});
*/
</script>
{% endblock %}